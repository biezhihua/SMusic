@startuml

[*] --> [*]

MP_STATE_IDLE --> MP_STATE_INITIALIZED:set_data_source()
MP_STATE_IDLE --> MP_STATE_IDLE:reset()
MP_STATE_IDLE --> MP_STATE_END:release()

MP_STATE_INITIALIZED --> MP_STATE_ASYNC_PREPARING:prepare_async()
MP_STATE_INITIALIZED --> MP_STATE_IDLE:reset()
MP_STATE_INITIALIZED --> MP_STATE_END:release()

MP_STATE_ASYNC_PREPARING --> MP_STATE_PREPARED:prepared()
MP_STATE_ASYNC_PREPARING --> MP_STATE_ERROR:error()
MP_STATE_ASYNC_PREPARING --> MP_STATE_IDLE:reset()
MP_STATE_ASYNC_PREPARING --> MP_STATE_END:release()

MP_STATE_PREPARED --> MP_STATE_PREPARED:seek_to()
MP_STATE_PREPARED --> MP_STATE_STARTED:start()
MP_STATE_PREPARED --> MP_STATE_IDLE:reset()
MP_STATE_PREPARED --> MP_STATE_END:release()

MP_STATE_STARTED --> MP_STATE_STARTED:seek_to()
MP_STATE_STARTED --> MP_STATE_STARTED:start()
MP_STATE_STARTED --> MP_STATE_PAUSED:pause()
MP_STATE_STARTED --> MP_STATE_STOPPED:stop()
MP_STATE_STARTED --> MP_STATE_COMPLETED:complete()
MP_STATE_STARTED --> MP_STATE_ERROR:error()

MP_STATE_PAUSED --> MP_STATE_PAUSED:seek_to()
MP_STATE_PAUSED --> MP_STATE_STARTED:start()
MP_STATE_PAUSED --> MP_STATE_PAUSED:pause()
MP_STATE_PAUSED --> MP_STATE_STOPPED:stop()
MP_STATE_PAUSED --> MP_STATE_IDLE:reset()
MP_STATE_PAUSED --> MP_STATE_END:release()

MP_STATE_STOPPED --> MP_STATE_STOPPED:stop()
MP_STATE_STOPPED --> MP_STATE_ASYNC_PREPARING:prepare_async()
MP_STATE_STOPPED --> MP_STATE_IDLE:reset()
MP_STATE_STOPPED --> MP_STATE_END:release()

MP_STATE_COMPLETED --> MP_STATE_COMPLETED:seek_to()
MP_STATE_COMPLETED --> MP_STATE_STARTED:start()
MP_STATE_COMPLETED --> MP_STATE_COMPLETED:pause()
MP_STATE_COMPLETED --> MP_STATE_STOPPED:stop()
MP_STATE_COMPLETED --> MP_STATE_IDLE:reset()
MP_STATE_COMPLETED --> MP_STATE_END:release()

MP_STATE_ERROR --> MP_STATE_IDLE:reset()
MP_STATE_ERROR --> MP_STATE_END:release()

MP_STATE_END --> MP_STATE_END:release()


@enduml